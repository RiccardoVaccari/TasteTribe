<div class="review-section">
    <strong>RECENSIONI UTENTI:</strong>
    <ul>
        {% for review in reviews %}
            <div class="recipe-review" id="review-{{ review.id }}">
                <p>Recensione di {% if locked_reviews %}Anonimo{% else %}{{ review.review_author_guid.first_name }} {{ review.review_author_guid.last_name }}{% endif %}</p>
                <p>Voto: {{ review.review_grade }} - {{ review.review_notes }}</p>
                <span class="like-icon" data-review-id="{{ review.id }}" data-interaction-type="like">
                    {% if review.user_interaction == 1 %}
                        <i class="fa-solid fa-thumbs-up" id="like-icon-{{ review.id }}" style="color: #0a9900;"></i>
                    {% else %}
                        <i class="fa-regular fa-thumbs-up" id="like-icon-{{ review.id }}" style="color: #000000;"></i>
                    {% endif %}
                    <small>{{ review.review_up_votes }}</small>
                </span>
                <span class="dislike-icon" data-review-id="{{ review.id }}" data-interaction-type="dislike">
                    {% if review.user_interaction == -1 %}
                        <i class="fa-solid fa-thumbs-down" id="dislike-icon-{{ review.id }}" style="color: #b80000;"></i>
                    {% else %}
                        <i class="fa-regular fa-thumbs-down" id="dislike-icon-{{ review.id }}" style="color: #000000;"></i>
                    {% endif %}
                    <small>{{ review.review_down_votes }}</small>
                </span>
            </div>
        {% endfor %}
    </ul>
</div>

<div class="add-review-section">
    <strong>Aggiungi la tua recensione:</strong>
    <form id="reviewForm" method="post">
        {% csrf_token %}
        <div class="rating">
            <input type="radio" id="star5" name="review_grade" value="5" /><label for="star5" title="5 stars">5 stars</label>
            <input type="radio" id="star4" name="review_grade" value="4" /><label for="star4" title="4 stars">4 stars</label>
            <input type="radio" id="star3" name="review_grade" value="3" /><label for="star3" title="3 stars">3 stars</label>
            <input type="radio" id="star2" name="review_grade" value="2" /><label for="star2" title="2 stars">2 stars</label>
            <input type="radio" id="star1" name="review_grade" value="1" /><label for="star1" title="1 star">1 star</label>
        </div>
        <div class="form-group">
            <textarea name="review_notes" class="form-control" placeholder="Scrivi la tua recensione qui..." rows="4"></textarea>
        </div>
        <button type="submit" class="btn btn-success mt-3">Pubblica</button>
    </form>
</div>

<style>
    .rating {
        direction: rtl;
        unicode-bidi: bidi-override;
        font-size: 30px;
        margin-bottom: 10px;
    }
    .rating > input {
        display: none;
    }
    .rating > label {
        color: #ddd;
        float: right;
        cursor: pointer;
        transition: color 0.2s ease-in-out;
    }
    .rating > input:checked ~ label {
        color: #f5c518;
    }
    .rating > label:hover,
    .rating > label:hover ~ label {
        color: #f5c518;
    }
    .form-group {
        margin-top: 15px;
    }
</style>
